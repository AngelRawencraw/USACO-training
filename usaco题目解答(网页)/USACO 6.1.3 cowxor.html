<html>
<head>
  <title>USACO 6.1.3 cowxor</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1993"/>
<h1>USACO 6.1.3 cowxor</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>解题报告</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><div align="left" style="text-align: start; text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="宋体" size="4">异或的逆运算还是异或。所以先处理总和的值，num[i]表示前i个牛的异或值。所以从i到j的异或值就是<b>num[j] xor num[i-1]。</b>但是具体查询不能朴素，时间复杂度是O(n^2)会超时。考虑到异或的性质，越是高位不同的话值会越大，所以我们贪心寻找即可，数据结构使用0-1字典树存储，每次都贪心寻找与当前的异或各位尽可能不同，且不同位尽可能高的值，最后出现的结果就是最优的。</font></div></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>运行情况</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]<br></b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;">
Compiling...
Compile: OK

Executing...
   Test 1: TEST OK [0.000 secs, 15480 KB]
   Test 2: TEST OK [0.000 secs, 15480 KB]
   Test 3: TEST OK [0.000 secs, 15480 KB]
   Test 4: TEST OK [0.000 secs, 15480 KB]
   Test 5: TEST OK [0.022 secs, 15480 KB]
   Test 6: TEST OK [0.086 secs, 15480 KB]
   Test 7: TEST OK [0.162 secs, 15480 KB]
   Test 8: TEST OK [0.119 secs, 15480 KB]
   Test 9: TEST OK [0.043 secs, 15480 KB]
   Test 10: TEST OK [0.043 secs, 15480 KB]
   Test 11: TEST OK [0.054 secs, 15480 KB]
   Test 12: TEST OK [0.054 secs, 15480 KB]
   Test 13: TEST OK [0.043 secs, 15480 KB]
   Test 14: TEST OK [0.086 secs, 15480 KB]
   Test 15: TEST OK [0.281 secs, 15480 KB]
   Test 16: TEST OK [0.270 secs, 15480 KB]
   Test 17: TEST OK [0.270 secs, 15480 KB]
   Test 18: TEST OK [0.205 secs, 15480 KB]
   Test 19: TEST OK [0.032 secs, 15480 KB]
   Test 20: TEST OK [0.000 secs, 15480 KB]

All tests OK.
<br>Your program ('cowxor') produced all correct answers!  This is your
submission #2 for this problem.  <b>Congratulations!</b></pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;"></pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;"></pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;"></pre><pre style="text-align: start;"></pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>程序清单</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><div align="left"><pre style="line-height: 12pt; font-size: 13px; background-color: rgb(255, 255, 236);"></pre><div dir="ltr" lang="zh-cn" style="direction: ltr; text-align: start;"><div dir="ltr" style="text-align: left;"><pre style="line-height: 12pt;"></pre><div><pre style="font-size: 13px; line-height: 12pt; background-color: rgb(255, 255, 236);"></pre><pre style="line-height: 12pt;"></pre><pre style="background-color: rgb(255, 255, 236);"></pre><pre style="line-height: 12pt; font-size: 13px;"></pre><pre style="line-height: 12pt; background-color: rgb(255, 255, 236);"></pre><pre style="line-height: 12pt; font-size: 13px;"></pre><pre style="line-height: 12pt; background-color: rgb(255, 255, 236);"><span style="color: rgb(51, 153, 0);">#include &lt;iostream&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstring&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstdio&gt;</span>
 
<span style="color: rgb(0, 0, 255);">using</span> <span style="color: rgb(0, 0, 255);">namespace</span> std<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">int</span> num<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">100005</span><span style="color: rgb(0, 128, 0);">]</span>, next<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1000005</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span>, pos<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1000005</span><span style="color: rgb(0, 128, 0);">]</span>, n<span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 0, 255);">int</span> k, ans, anss <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span>, anse <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span>, tot <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span>, j<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">int</span> main<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;cowxor.in&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;r&quot;</span>, <span style="color: rgb(0, 0, 255);">stdin</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;cowxor.out&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;w&quot;</span>, <span style="color: rgb(0, 0, 255);">stdout</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 221);">scanf</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;%d&quot;</span>, <span style="color: rgb(0, 0, 64);">&amp;</span>n<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> i <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 128);">&lt;=</span> n<span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                <span style="color: rgb(0, 0, 221);">scanf</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;%d&quot;</span>, <span style="color: rgb(0, 0, 64);">&amp;</span>num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">^</span><span style="color: rgb(0, 0, 128);">=</span> num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>k <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span>, j <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">20</span><span style="color: rgb(0, 128, 128);">;</span> j <span style="color: rgb(0, 0, 128);">&gt;=</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;</span> j<span style="color: rgb(0, 0, 64);">--</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">!</span>next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> j<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">&amp;</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(102, 102, 102);">//如果相同就不添加，保证靠前</span>
                                next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> j<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">&amp;</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 64);">++</span>tot<span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(102, 102, 102);">//记录指向的位置</span>
                        k <span style="color: rgb(0, 0, 128);">=</span> next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> j<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">&amp;</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 128, 0);">}</span>
                pos<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> i <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>k <span style="color: rgb(0, 0, 128);">= </span><span style="color: rgb(0, 0, 221);">1</span>, j <span style="color: rgb(0, 0, 128);">= </span><span style="color: rgb(0, 0, 221);">20</span><span style="color: rgb(0, 128, 128);">; </span>j <span style="color: rgb(0, 0, 128);">&gt;= </span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">; </span>j--<span style="color: rgb(0, 128, 0);">)</span>
                        k <span style="color: rgb(0, 0, 128);">=</span> next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 128, 0);">(</span> <span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 128);">&gt;&gt;</span>j<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 0, 64);">&amp;</span><span style="color: rgb(0, 0, 221);">1</span> <span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 128, 128);">?</span> next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 128, 0);">(</span> <span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 128);">&gt;&gt;</span>j<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 0, 64);">&amp;</span><span style="color: rgb(0, 0, 221);">1</span> <span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 128, 128);">:</span>
                                next<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 128);">&gt;&gt;</span>j<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 0, 64);">&amp;</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span>num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">^</span> num<span style="color: rgb(0, 128, 0);">[</span>pos<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 128);">&gt;</span> ans<span style="color: rgb(0, 128, 0);">)</span>
                        ans <span style="color: rgb(0, 0, 128);">=</span> num<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">^</span> num<span style="color: rgb(0, 128, 0);">[</span>pos<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">]</span>, anss <span style="color: rgb(0, 0, 128);">=</span> pos<span style="color: rgb(0, 128, 0);">[</span>k<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, anse <span style="color: rgb(0, 0, 128);">=</span> i<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 128, 0);">}</span>
        <span style="color: rgb(0, 0, 221);">cout</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> ans <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> <span style="color: rgb(255, 0, 0);">' '</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> anss <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> <span style="color: rgb(255, 0, 0);">' '</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> anse <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> endl<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span></pre></div></div></div></div></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>注意事项</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font color="#010101" face="宋体">异或的优先级比等于号低。</font></div><div align="justify"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>难易等级</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font><font color="#010101" size="2"><span style="font-size: 10pt;"><b><font face="黑体"> Easy Up(noip the 2nd)</font></b></span></font></div></div>
</div></body></html> 