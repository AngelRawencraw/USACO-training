<html>
<head>
  <title>USACO 5.5.3 twofive</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1958"/>
<h1>USACO 5.5.3 twofive</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>解题报告</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="宋体"><font size="4">本质思想很像3.2</font><span style="font-size: 16px;">.2的</span></font><span style="text-indent: 0mm; font-size: 16px;"><font face="宋体">kimbits。但是分析起来难多了，首先使用DFS的解题策略很好想，也容易编写，但是会超时。因此我们将分析kimbits的思路用在这道题目上，求出DP方程的值并且使用DP构造出解。现在的难点是如果这道题目使用DP那么状态转移方程要怎么定义。因为如果解决了这个核心问题，构造出解就只是程序实现模块的事情了。</font></span></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><span style="text-indent: 0mm; font-size: 16px;"><font face="宋体">根据题目要求，单词一定要合法，不是合法的单词不考虑。首先是求出字符串的排位，字符串要按照字典序排位，我们可以先求出不同字符为前缀的累加值。例如以ACB开头的单词的个数必定是0，而如果我们要求单词的排位，单词是ACF......那么我们首先要统计所有AB开头的，ACD开头的，ACE开头的......最后加1，如此我们就可以计算出ACF的排位是多少。那如果是给出排位n求字符串，还是要先计算累加值，先计算以AB开头的。假如当前的累加值TOTAL &gt;= n，说明第二个字母就是B(第一个字母永远是A)，否则继续累加AC开头的......直到TOTAL &gt;= n为止。然后减去确定当前字母后的最后累加的值(即TOTAL -= TOTAL',TOTAL'是确定字母后最后被加入TOTAL的那个数字)，然后继续用这个办法迭代出第3，4...个字母直到结束。</font></span></div><div align="left" style="text-align: start;text-indent: 0mm; margin: 4.75mm 0mm;"><font face="宋体" size="4">以上，我们就有了大体的思路。现在要如何去计算这个累加值呢。或者说给定字符串前缀后，求以此开头的字符串共有多少个。设状态转移方程DP[x1][x2][x3][x4][x5](其中5&gt;=x1&gt;=x2&gt;=x3&gt;=x4&gt;=x5&gt;=0)表示对于ABCDEFGHI.....等合法字符串取出前(x1+x2+x3+x4+x5)个字符分别在第i行放置xi个，并且以这个矩阵为开头共有多少个结果。显然这个开头的最右边连成的边界斜率非负(如下示例)，因为如果我们以这个为开头必须保证矩阵满足题目给出的性质，因为我们是按照顺序提取字符的，所以，斜率是负则很可能会出现填入新的字符后，这个新填入的字符比他下方的要大。然后当前要填入的是(x1+x2+x3+x4+x5+1)个字符，</font><span style="text-align: -webkit-left; text-indent: 0mm; font-size: 16px;"><font face="宋体">它显然只能够贴着已经放过的位置放，也就是它的上方和左方都已经有了单词，如同示例中划横线的部分（默认第-1行与第-1列全满）。把这个位置叫做合法位置。</font></span></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font face="宋体" size="4">A B C - *<br>
D E - * *<br>
F - * * *<br>
- * * * *<br>
* * * * *</font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font face="宋体" size="4">接着是用记忆化搜索解出DP。方法是先枚举每一个前缀，递归的时候枚举所有合法位置。边界条件，DP[5][5][5][5][5]=1。因为我们每次递归都会向前<b>推进一个</b>字符，所以已经搜索过的并且以后必须要固定的字符我们记录一下。比如ACF......当我们搜索完AB开头的并且开始搜索以ACD开头的字符串的时候，其实字符'C'必须要固定了，以后不可以再使用这个字符了，如果递归到已固定字符则跳过。同时维护当前行和列的最大字符，因为行和列都必须是递增的，所以我们应该随时更新每一行和每一列的最值。</font></div></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>运行情况</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;">
Compiling...
Compile: OK

Executing...
   Test 1: TEST OK [0.000 secs, 3404 KB]
   Test 2: TEST OK [0.000 secs, 3404 KB]
   Test 3: TEST OK [0.000 secs, 3404 KB]
   Test 4: TEST OK [0.000 secs, 3404 KB]
   Test 5: TEST OK [0.000 secs, 3404 KB]
   Test 6: TEST OK [0.000 secs, 3404 KB]
   Test 7: TEST OK [0.000 secs, 3404 KB]
   Test 8: TEST OK [0.000 secs, 3404 KB]
   Test 9: TEST OK [0.000 secs, 3404 KB]
   Test 10: TEST OK [0.000 secs, 3404 KB]
   Test 11: TEST OK [0.000 secs, 3404 KB]
   Test 12: TEST OK [0.000 secs, 3404 KB]

All tests OK.
<br><b>YOUR PROGRAM ('twofive') WORKED FIRST TIME!</b>  That's fantastic
-- and a rare thing.  Please accept these special automated
congratulations.
</pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><pre style="text-align: start;"></pre><pre style="text-align: start;"></pre></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>程序清单</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><div align="left"><pre style="line-height: 12pt; font-size: 13px; background-color: rgb(255, 255, 236);"></pre><div dir="ltr" lang="zh-cn" style="direction: ltr; text-align: start;"><div dir="ltr" style="text-align: left;"><pre style="line-height: 12pt;"></pre><div><pre style="font-size: 13px; line-height: 12pt; background-color: rgb(255, 255, 236);"></pre><pre style="line-height: 12pt;"></pre><pre style="background-color: rgb(255, 255, 236);"></pre><pre style="line-height: 12pt; font-size: 13px;"></pre><pre style="line-height: 12pt; background-color: rgb(255, 255, 236);"><span style="color: rgb(51, 153, 0);">#include &lt;iostream&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstring&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstdio&gt;</span>
 
<span style="color: rgb(0, 0, 255);">using</span> <span style="color: rgb(0, 0, 255);">namespace</span> std<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">char</span> ch, str<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">30</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 0, 255);">int</span> n, dp<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span>, used<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">26</span><span style="color: rgb(0, 128, 0);">]</span>, maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span>, maxc<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">6</span><span style="color: rgb(0, 128, 0);">]</span>, ans, cur<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">int</span> calc<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> a, <span style="color: rgb(0, 0, 255);">int</span> b, <span style="color: rgb(0, 0, 255);">int</span> c, <span style="color: rgb(0, 0, 255);">int</span> d, <span style="color: rgb(0, 0, 255);">int</span> e, <span style="color: rgb(0, 0, 255);">int</span> chr<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 255);">int</span> <span style="color: rgb(0, 0, 64);">&amp;</span>inwork <span style="color: rgb(0, 0, 128);">=</span> dp<span style="color: rgb(0, 128, 0);">[</span>a<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span>b<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span>c<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span>d<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span>e<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>inwork<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 255);">return</span> inwork<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>used<span style="color: rgb(0, 128, 0);">[</span>chr<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 255);">return</span> inwork <span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a, b, c, d, e, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>a <span style="color: rgb(0, 0, 128);">&lt;</span> <span style="color: rgb(0, 0, 221);">5</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>a<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> inwork <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, b, c, d, e, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>b <span style="color: rgb(0, 0, 128);">&lt;</span> a <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>b<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> inwork <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a, b <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, c, d, e, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>c <span style="color: rgb(0, 0, 128);">&lt;</span> b <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>c<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> inwork <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a, b, c <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, d, e, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>d <span style="color: rgb(0, 0, 128);">&lt;</span> c <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>d<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> inwork <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a, b, c, d <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, e, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>e <span style="color: rgb(0, 0, 128);">&lt;</span> d <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">4</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> chr <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>e<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> inwork <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>a, b, c, d, e <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span>, chr <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">return</span> inwork<span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span>
 
<span style="color: rgb(0, 0, 255);">inline</span> <span style="color: rgb(0, 0, 255);">void</span> put<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> chr, <span style="color: rgb(0, 0, 255);">int</span> r, <span style="color: rgb(0, 0, 255);">int</span> c<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 221);">memset</span><span style="color: rgb(0, 128, 0);">(</span>dp, <span style="color: rgb(0, 0, 221);">0</span>, <span style="color: rgb(0, 0, 221);">sizeof</span><span style="color: rgb(0, 128, 0);">(</span>dp<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        dp<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(102, 102, 102);">//边界条件</span>
        maxr<span style="color: rgb(0, 128, 0);">[</span>r<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> maxc<span style="color: rgb(0, 128, 0);">[</span>c<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> chr<span style="color: rgb(0, 128, 128);">;</span>
        used<span style="color: rgb(0, 128, 0);">[</span>chr<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 255);">true</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span>
 
<span style="color: rgb(0, 0, 255);">int</span> main<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;twofive.in&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;r&quot;</span>, <span style="color: rgb(0, 0, 255);">stdin</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;twofive.out&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;w&quot;</span>, <span style="color: rgb(0, 0, 255);">stdout</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 221);">cin</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> ch<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>ch <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">'N'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                <span style="color: rgb(0, 0, 221);">cin</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> n<span style="color: rgb(0, 128, 128);">;</span>
                <font color="#0000DD">maxc[0] = maxr[0] = -1</font><span style="color: rgb(0, 128, 128);">;</span>  <span style="color: rgb(102, 102, 102);">//一开始要从'A'开头的字符计算</span>
                <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> i <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 128);">&lt;</span> <span style="color: rgb(0, 0, 221);">25</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                        bnd<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(102, 102, 102);">//当前即将要搜索的列</span>
                        <span style="color: rgb(0, 0, 255);">int</span> j<span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>j <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;</span> j <span style="color: rgb(0, 0, 128);">&lt;</span> <span style="color: rgb(0, 0, 221);">25</span><span style="color: rgb(0, 128, 128);">;</span> j<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">!</span>used<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> j <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> j <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">%</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        put<span style="color: rgb(0, 128, 0);">(</span>j, i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span>, i <span style="color: rgb(0, 0, 64);">%</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        ans <span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">4</span><span style="color: rgb(0, 128, 0);">]</span>, <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cur <span style="color: rgb(0, 0, 64);">+</span> ans <span style="color: rgb(0, 0, 128);">&gt;=</span> n<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 255);">break</span><span style="color: rgb(0, 128, 128);">;</span>
                                        cur <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> ans<span style="color: rgb(0, 128, 128);">;</span>
                                        used<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 255);">false</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                        <span style="color: rgb(0, 0, 221);">cout</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> <span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 128, 0);">(</span>j <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(255, 0, 0);">'A'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 128, 0);">}</span>
                <span style="color: rgb(0, 0, 221);">cout</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> endl<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span><span style="color: rgb(0, 128, 0);">{</span>
                <span style="color: rgb(0, 0, 221);">cin</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> str<span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> i <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 128);">&lt;</span> <span style="color: rgb(0, 0, 221);">25</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                        bnd<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(102, 102, 102);">//当前即将要搜索的列</span>
                        <span style="color: rgb(0, 0, 255);">int</span> j<span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>j <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;</span> j <span style="color: rgb(0, 0, 128);">&lt;</span> <span style="color: rgb(0, 0, 255);">int</span><span style="color: rgb(0, 128, 0);">(</span>str<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(255, 0, 0);">'A'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> j<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(102, 102, 102);">//事实上字母'A'开头不会被计算</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">!</span>used<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> j <span style="color: rgb(0, 0, 128);">&gt;</span> maxr<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">&amp;&amp;</span> j <span style="color: rgb(0, 0, 128);">&gt;</span> maxc<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">%</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        put<span style="color: rgb(0, 128, 0);">(</span>j, i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span>, i <span style="color: rgb(0, 0, 64);">%</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        ans <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> calc<span style="color: rgb(0, 128, 0);">(</span>bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span>, bnd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">4</span><span style="color: rgb(0, 128, 0);">]</span>, <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        used<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 255);">false</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                        used<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 255);">true</span>, maxr<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">/</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> maxc<span style="color: rgb(0, 128, 0);">[</span>i <span style="color: rgb(0, 0, 64);">%</span> <span style="color: rgb(0, 0, 221);">5</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> j<span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 128, 0);">}</span>
                <span style="color: rgb(0, 0, 221);">cout</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> ans <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> endl<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 128, 0);">}</span>
        <span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span></pre></div></div></div></div></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>注意事项</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="text-indent: 0mm; text-align: -webkit-left; margin: 4.75mm 0mm;"><font color="#010101" face="宋体">对于W，最后我们计算到刚好比给定字符串小一个排位的字符串，所以最后输出结果要加1。每次递归都是重新计算要记住清零DP数组。本题要想清楚的细节很多。</font></div><div align="justify"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>难易等级</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font><font color="#010101" size="2"><span style="font-size: 10pt;"><b><font face="黑体"> Hard Down(NOI the 1st)</font></b></span></font></div></div>
</div></body></html> 