<html>
<head>
  <title>USACO 5.3.2 window</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1802"/>
<h1>USACO 5.3.2 window</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size: 13pt;"><b>解题报告</b></span></font><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>]</b></span></font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="宋体" size="4">和3.1.4运用到的核心思想一致，就是矩形切割，3.1.4我写的是非递归的，这回用递归写就很得心应手了。其他的部分就是模拟了，为了减少编程时间和避免编程错误，使用STL中list和map来辅助查询某一个矩形和模拟题目中的给定操作。判断两个矩形相交的时候，可以从反面思考，因为两个矩形不相交更容易判断(只需要判断4个条件)，除此之外就是相交的情况了。</font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size: 13pt;"><b>运行情况</b></span></font><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>]</b></span></font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><pre>
Compiling...
Compile: OK

Executing...
   Test 1: TEST OK [0.000 secs, 3368 KB]
   Test 2: TEST OK [0.000 secs, 3368 KB]
   Test 3: TEST OK [0.000 secs, 3368 KB]
   Test 4: TEST OK [0.000 secs, 3368 KB]
   Test 5: TEST OK [0.000 secs, 3368 KB]
   Test 6: TEST OK [0.000 secs, 3368 KB]
   Test 7: TEST OK [0.000 secs, 3368 KB]
   Test 8: TEST OK [0.000 secs, 3368 KB]
   Test 9: TEST OK [0.011 secs, 3368 KB]
   Test 10: TEST OK [0.022 secs, 3368 KB]
   Test 11: TEST OK [0.022 secs, 3368 KB]

All tests OK.
<br>Your program ('window') produced all correct answers!  This is your
submission #3 for this problem.  <b>Congratulations!</b></pre></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size: 13pt;"><b>程序清单</b></span></font><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>]</b></span></font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><div align="left"><pre style="line-height: 12pt; font-size: 13px; background-color: rgb(255, 255, 236);"></pre><div dir="ltr" lang="zh-cn" style="direction: ltr; text-align: start; font-family: Verdana, Arial, sans-serif;"><div dir="ltr" style="text-align: left;"><div style="font-family: monospace;"><pre style="line-height: 12pt;"><span style="color: rgb(51, 153, 0);">#include &lt;iostream&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cctype&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstring&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;string&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;iomanip&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cstdio&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;map&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;cmath&gt;
</span><span style="color: rgb(51, 153, 0);">#include &lt;list&gt;</span>
 
<span style="color: rgb(51, 153, 0);">#define MAX(a, b) (a &gt; b ? a : b)
</span><span style="color: rgb(51, 153, 0);">#define MIN(a, b) (a &lt; b ? a : b)</span>
 
<span style="color: rgb(0, 0, 255);">using</span> <span style="color: rgb(0, 0, 255);">namespace</span> std<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">struct</span> Node<span style="color: rgb(0, 128, 0);">{</span>
        Node<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> x, <span style="color: rgb(0, 0, 255);">int</span> y, <span style="color: rgb(0, 0, 255);">int</span> X, <span style="color: rgb(0, 0, 255);">int</span> Y<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">:</span>x1<span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">)</span>, y1<span style="color: rgb(0, 128, 0);">(</span>y<span style="color: rgb(0, 128, 0);">)</span>, x2<span style="color: rgb(0, 128, 0);">(</span>X<span style="color: rgb(0, 128, 0);">)</span>, y2<span style="color: rgb(0, 128, 0);">(</span>Y<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                tarea <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">abs</span><span style="color: rgb(0, 128, 0);">(</span>x1 <span style="color: rgb(0, 0, 64);">-</span> x2<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">*</span> <span style="color: rgb(0, 0, 221);">abs</span><span style="color: rgb(0, 128, 0);">(</span>y1 <span style="color: rgb(0, 0, 64);">-</span> y2<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">int</span> x1, y1, x2, y2<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">double</span> tarea<span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 128, 128);">;</span>
map<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span>, Node <span style="color: rgb(0, 0, 64);">*</span><span style="color: rgb(0, 0, 128);">&gt;</span> window<span style="color: rgb(0, 128, 128);">;</span>
string cmd<span style="color: rgb(0, 128, 128);">;</span>
list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span> que<span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 0, 255);">double</span> ans<span style="color: rgb(0, 128, 128);">;</span>
 
<span style="color: rgb(0, 0, 255);">inline</span> <span style="color: rgb(0, 0, 255);">void</span> swap<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 255);">int</span> <span style="color: rgb(0, 0, 64);">&amp;</span>a, <span style="color: rgb(0, 0, 255);">int</span> <span style="color: rgb(0, 0, 64);">&amp;</span>b<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 255);">int</span> temp <span style="color: rgb(0, 0, 128);">=</span> a<span style="color: rgb(0, 128, 128);">;</span>
        a <span style="color: rgb(0, 0, 128);">=</span> b<span style="color: rgb(0, 128, 128);">;</span>
        b <span style="color: rgb(0, 0, 128);">=</span> temp<span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span>
 
<span style="color: rgb(0, 0, 255);">int</span> CutRect<span style="color: rgb(0, 128, 0);">(</span>list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span><span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">iterator</span> i, <span style="color: rgb(0, 0, 255);">int</span> x1, <span style="color: rgb(0, 0, 255);">int</span> y1, <span style="color: rgb(0, 0, 255);">int</span> x2, <span style="color: rgb(0, 0, 255);">int</span> y2<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span> <span style="color: rgb(102, 102, 102);">//矩形切割</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">++</span>i <span style="color: rgb(0, 0, 128);">==</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">||</span> x1 <span style="color: rgb(0, 0, 128);">==</span> x2 <span style="color: rgb(0, 0, 64);">||</span> y1 <span style="color: rgb(0, 0, 128);">==</span> y2<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 128, 0);">(</span>x2 <span style="color: rgb(0, 0, 64);">-</span> x1<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">*</span> <span style="color: rgb(0, 128, 0);">(</span>y2 <span style="color: rgb(0, 0, 64);">-</span> y1<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">int</span> a1 <span style="color: rgb(0, 0, 128);">=</span> window<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">*(--</span>i)<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>x1, a2 <span style="color: rgb(0, 0, 128);">=</span> window<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>x2, b1 <span style="color: rgb(0, 0, 128);">=</span> window<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>y1, b2 <span style="color: rgb(0, 0, 128);">=</span> window<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>y2, tot<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span>a1 <span style="color: rgb(0, 0, 128);">&gt;=</span> x2<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">||</span> <span style="color: rgb(0, 128, 0);">(</span>a2 <span style="color: rgb(0, 0, 128);">&lt;=</span> x1<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">||</span> <span style="color: rgb(0, 128, 0);">(</span>b1 <span style="color: rgb(0, 0, 128);">&gt;=</span> y2<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">||</span> <span style="color: rgb(0, 128, 0);">(</span>b2 <span style="color: rgb(0, 0, 128);">&lt;=</span> y1<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span> <span style="color: rgb(102, 102, 102);">//存在交集判断：去掉没有交集的,剩下的就是有交集的</span>
                tot <span style="color: rgb(0, 0, 128);">=</span>  CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, x1, y1, MIN<span style="color: rgb(0, 128, 0);">(</span>a2, x2<span style="color: rgb(0, 128, 0);">)</span>, MAX<span style="color: rgb(0, 128, 0);">(</span>y1, b1<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span>, <span style="color: rgb(0, 0, 64);">++</span>i<span style="color: rgb(0, 128, 128);">;</span>
                tot <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, x1, MAX<span style="color: rgb(0, 128, 0);">(</span>y1, b1<span style="color: rgb(0, 128, 0);">)</span>, MAX<span style="color: rgb(0, 128, 0);">(</span>x1, a1<span style="color: rgb(0, 128, 0);">)</span>, y2<span style="color: rgb(0, 128, 0);">)</span>, <span style="color: rgb(0, 0, 64);">++</span>i<span style="color: rgb(0, 128, 128);">;</span>
                tot <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, MAX<span style="color: rgb(0, 128, 0);">(</span>x1, a1<span style="color: rgb(0, 128, 0);">)</span>, MIN<span style="color: rgb(0, 128, 0);">(</span>b2, y2<span style="color: rgb(0, 128, 0);">)</span>, x2, y2<span style="color: rgb(0, 128, 0);">)</span>, <span style="color: rgb(0, 0, 64);">++</span>i<span style="color: rgb(0, 128, 128);">;</span>
                tot <span style="color: rgb(0, 0, 64);">+</span><span style="color: rgb(0, 0, 128);">=</span> CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, MIN<span style="color: rgb(0, 128, 0);">(</span>a2, x2<span style="color: rgb(0, 128, 0);">)</span>, y1, x2, MIN<span style="color: rgb(0, 128, 0);">(</span>y2, b2<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span>, <span style="color: rgb(0, 0, 64);">++</span>i<span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 0, 255);">return</span> tot<span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span> <span style="color: rgb(0, 0, 255);">return</span> CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, x1, y1, x2, y2<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span>
 
<span style="color: rgb(0, 0, 255);">int</span> main<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;window.in&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;r&quot;</span>, <span style="color: rgb(0, 0, 255);">stdin</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 221);">freopen</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(255, 0, 0);">&quot;window.out&quot;</span>, <span style="color: rgb(255, 0, 0);">&quot;w&quot;</span>, <span style="color: rgb(0, 0, 255);">stdout</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
        <span style="color: rgb(0, 0, 255);">while</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 221);">cin</span> <span style="color: rgb(0, 0, 128);">&gt;&gt;</span> cmd<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">'w'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>      <span style="color: rgb(102, 102, 102);">//创建窗体，初始时自动置顶；</span>
                        <span style="color: rgb(0, 0, 255);">int</span> x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 128, 0);">{</span><span style="color: rgb(0, 0, 221);">0</span>,<span style="color: rgb(0, 0, 221);">0</span>,<span style="color: rgb(0, 0, 221);">0</span>,<span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">}</span>, t <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">0</span>, i, j<span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>i <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 128);">&lt;</span> cmd.<span style="color: rgb(0, 119, 136);">size</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span>i<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">','</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>j <span style="color: rgb(0, 0, 128);">=</span> i <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(0, 0, 221);">isdigit</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> j<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                                x<span style="color: rgb(0, 128, 0);">[</span>t<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> x<span style="color: rgb(0, 128, 0);">[</span>t<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">*</span> <span style="color: rgb(0, 0, 221);">10</span> <span style="color: rgb(0, 0, 64);">+</span> <span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span>j<span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(255, 0, 0);">'0'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        i <span style="color: rgb(0, 0, 128);">=</span> j <span style="color: rgb(0, 0, 64);">-</span> <span style="color: rgb(0, 0, 221);">1</span>, t<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">&gt;</span> x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> swap<span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span>, x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">&gt;</span> x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span> swap<span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span>, x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                        Node <span style="color: rgb(0, 0, 64);">*</span>win <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(0, 0, 221);">new</span> Node<span style="color: rgb(0, 128, 0);">(</span>x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span>, x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">1</span><span style="color: rgb(0, 128, 0);">]</span>, x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span>, x<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                        window<span style="color: rgb(0, 128, 0);">[</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">=</span> win<span style="color: rgb(0, 128, 128);">;</span>
                        que.<span style="color: rgb(0, 119, 136);">push_front</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> <span style="color: rgb(102, 102, 102);">//插入到队列的头部</span>
                <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span> <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">'t'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span> <span style="color: rgb(102, 102, 102);">//置顶窗体</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span><span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">iterator</span> i <span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">end</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 128);">==</span> cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        que.<span style="color: rgb(0, 119, 136);">erase</span><span style="color: rgb(0, 128, 0);">(</span>i<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        que.<span style="color: rgb(0, 119, 136);">push_front</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">break</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span> <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">'b'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span> <span style="color: rgb(102, 102, 102);">//置底窗体</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span><span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">iterator</span> i <span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">end</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 128);">==</span> cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        que.<span style="color: rgb(0, 119, 136);">erase</span><span style="color: rgb(0, 128, 0);">(</span>i<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        que.<span style="color: rgb(0, 119, 136);">push_back</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">break</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span> <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 0);">]</span> <span style="color: rgb(0, 0, 128);">==</span> <span style="color: rgb(255, 0, 0);">'d'</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span> <span style="color: rgb(102, 102, 102);">//删除窗体</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span><span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">iterator</span> i <span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">end</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 128);">==</span> cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        que.<span style="color: rgb(0, 119, 136);">erase</span><span style="color: rgb(0, 128, 0);">(</span>i<span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        window.<span style="color: rgb(0, 119, 136);">erase</span><span style="color: rgb(0, 128, 0);">(</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">break</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                <span style="color: rgb(0, 128, 0);">}</span><span style="color: rgb(0, 0, 255);">else</span><span style="color: rgb(0, 128, 0);">{</span>                  <span style="color: rgb(102, 102, 102);">//计算窗体</span>
                        <span style="color: rgb(0, 0, 255);">for</span><span style="color: rgb(0, 128, 0);">(</span>list<span style="color: rgb(0, 0, 128);">&lt;</span><span style="color: rgb(0, 0, 255);">char</span><span style="color: rgb(0, 0, 128);">&gt;</span><span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">iterator</span> i <span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i <span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">end</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span> i<span style="color: rgb(0, 0, 64);">++</span><span style="color: rgb(0, 128, 0);">)</span>
                                <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">*</span>i<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 128);">==</span> cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">{</span>
                                        Node<span style="color: rgb(0, 0, 64);">*</span> nd <span style="color: rgb(0, 0, 128);">=</span> window<span style="color: rgb(0, 128, 0);">[</span>cmd<span style="color: rgb(0, 128, 0);">[</span><span style="color: rgb(0, 0, 221);">2</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 0);">]</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">if</span><span style="color: rgb(0, 128, 0);">(</span>i <span style="color: rgb(0, 0, 64);">!</span><span style="color: rgb(0, 0, 128);">=</span> que.<span style="color: rgb(0, 119, 136);">begin</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 0);">)</span>
                                                ans <span style="color: rgb(0, 0, 128);">=</span> CutRect<span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 64);">--</span>i, nd<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>x1, nd<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>y1, nd<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>x2, nd<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>y2<span style="color: rgb(0, 128, 0);">)</span> <span style="color: rgb(0, 0, 64);">/</span> nd<span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 128);">&gt;</span>tarea<span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">else</span> ans <span style="color: rgb(0, 0, 128);">=</span> <span style="color: rgb(128, 0, 128);">1.0</span><span style="color: rgb(0, 128, 128);">;</span>
                                        <span style="color: rgb(0, 0, 255);">break</span><span style="color: rgb(0, 128, 128);">;</span>
                                <span style="color: rgb(0, 128, 0);">}</span>
                        <span style="color: rgb(0, 0, 221);">cout</span>.<span style="color: rgb(0, 119, 136);">precision</span><span style="color: rgb(0, 128, 0);">(</span><span style="color: rgb(0, 0, 221);">3</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 221);">cout</span>.<span style="color: rgb(0, 119, 136);">setf</span><span style="color: rgb(0, 128, 0);">(</span>ios<span style="color: rgb(0, 128, 128);">::</span><span style="color: rgb(0, 119, 136);">fixed</span><span style="color: rgb(0, 128, 0);">)</span><span style="color: rgb(0, 128, 128);">;</span>
                        <span style="color: rgb(0, 0, 221);">cout</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> ans <span style="color: rgb(0, 0, 64);">*</span> <span style="color: rgb(128, 0, 128);">100.0</span> <span style="color: rgb(0, 0, 128);">&lt;&lt;</span> endl<span style="color: rgb(0, 128, 128);">;</span>
                <span style="color: rgb(0, 128, 0);">}</span>
        <span style="color: rgb(0, 128, 0);">}</span>
        <span style="color: rgb(0, 0, 255);">return</span> <span style="color: rgb(0, 0, 221);">0</span><span style="color: rgb(0, 128, 128);">;
</span><span style="color: rgb(0, 128, 0);">}</span></pre></div></div></div></div></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size: 13pt;"><b>注意事项</b></span></font><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>]</b></span></font></div><div align="left" style="text-indent: 0mm; margin: 4.75mm 0mm;"><font color="#010101" face="宋体">如果对于当前的矩形没有交集，不代表对上面的也没有，需要继续切割下去。</font></div><div align="justify"><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size: 13pt;"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size: 13pt;"><b>]</b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size: 10pt;"><b> Medium Up(noip the 4th)</b></span></font></div></div></div>
</div></body></html> 