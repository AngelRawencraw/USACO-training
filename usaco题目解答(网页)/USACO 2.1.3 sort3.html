<html>
<head>
  <title>USACO 2.1.3 sort3</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="474"/>
<h1>USACO 2.1.3 sort3</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>解题报告</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">中心思想就是贪心</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">实现方法非常简单</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">就是向下查找即可</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">分为只交换</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">次与</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">次的</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">交换</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">次的只要查找到数字</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">应该在的区间内即可</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">也就是从</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1 to (2</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">应该在的区域内</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">),</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">不用找</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">3,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">因为在</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的区间内凡是有不合理的只可能在</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2,3</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">里</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">;2</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的区间内有不合理的会在</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">3</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">内</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">如果出现在</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">内是不可能的</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">毕竟前面已经查找完了</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">所以不必查找</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">3;</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">交换</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">次的同样要先向下查找</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">然后在</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">3</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的区间内看看有无不合理的</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">再向上查找</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">也是唯一需要向上找的</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>运行情况</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling...<br>
Compile: OK</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Executing...<br>
   Test 1: TEST OK [0.011 secs, 2932 KB]<br>
   Test 2: TEST OK [0.000 secs, 2932 KB]<br>
   Test 3: TEST OK [0.011 secs, 2932 KB]<br>
   Test 4: TEST OK [0.000 secs, 2932 KB]<br>
   Test 5: TEST OK [0.000 secs, 2932 KB]<br>
   Test 6: TEST OK [0.011 secs, 2932 KB]<br>
   Test 7: TEST OK [0.000 secs, 2932 KB]<br>
   Test 8: TEST OK [0.011 secs, 2932 KB]</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">All tests OK.<br></span><span style="font-size:10pt"><b>YOUR PROGRAM ('sort3') WORKED FIRST TIME!</b></span><span style="font-size:10pt"> That's fantastic<br>
-- and a rare thing. Please accept these special automated<br>
congratulations.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>程序清单</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;sort3.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;sort3.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">n,num[1001],tot[4][2],tt=0;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">bool</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">flag;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">void</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">swap(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">&amp;a,</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">&amp;b)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">c=a;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                a=b;b=c;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fin&gt;&gt;n;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=n;i++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                fin&gt;&gt;num[i];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                tot[num[i]][0]++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//初始化区间</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                tot[1][1]=tot[1][0];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                tot[2][1]=tot[1][0]+tot[2][0];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                tot[3][1]=tot[2][1]+tot[3][0];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                tot[3][0]=tot[2][1]+1;tot[2][0]=tot[1][1]+1;tot[1][0]=1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=3;i++)</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//模拟即可</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=tot[i][0];j&lt;=tot[i][1];j++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                flag=</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">false</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">((num[j]!=i)&amp;&amp;(i!=3))</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//交换一次;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">k=tot[num[j]][0];k&lt;=tot[num[j]][1];k++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(num[k]==i)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                swap(num[k],num[j]);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                tt++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                flag=</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">true</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">break</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((!flag)&amp;&amp;num[j]!=i)</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//交换2次</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">k,tail;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(i&lt;3) {</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//向下</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                                                                k=tot[num[j]+1][0];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                                                                tail=tot[num[j]+1][1];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                {</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//向上</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                k=1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                tail=tot[2][1];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(k;k&lt;=tail;k++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(num[k]==i)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                swap(num[k],num[j]);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                tt++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">break</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fout&lt;&lt;tt&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>注意事项</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">无</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">还有一种方法是使用计数法</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">时间复杂度为</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">O(1),</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">具体参见</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">nocow</span></font></div><div align="justify"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>] </b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>Easy Up(noip the 2nd)</b></span></font></div></div></div>
</div></body></html> 