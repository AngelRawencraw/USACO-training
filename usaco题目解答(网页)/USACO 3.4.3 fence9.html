<html>
<head>
  <title>USACO 3.4.3 fence9</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="682"/>
<h1>USACO 3.4.3 fence9</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>解题报告</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">皮克定理</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">:</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">面积</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">S=</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">内部点数</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">+</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">图形边上的点数</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">/2-1;</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">必须都是整点</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">所以只需统计边上的点即可</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">也就是需要计算两个方程</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">然后利用皮克定理算出答案</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:12pt">USACO</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的局部枚举法不错</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">其实我也枚举了</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">本来</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">pick</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">定理要用</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">gcd</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.= =|||</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>运行情况</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling... <br>
Compile: OK</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Executing...<br>
   Test 1: TEST OK [0.000 secs, 2928 KB]<br>
   Test 2: TEST OK [0.000 secs, 2928 KB]<br>
   Test 3: TEST OK [0.011 secs, 2928 KB]<br>
   Test 4: TEST OK [0.011 secs, 2928 KB]<br>
   Test 5: TEST OK [0.000 secs, 2928 KB]<br>
   Test 6: TEST OK [0.011 secs, 2928 KB]<br>
   Test 7: TEST OK [0.011 secs, 2928 KB]<br>
   Test 8: TEST OK [0.022 secs, 2928 KB]<br>
   Test 9: TEST OK [0.000 secs, 2928 KB]<br>
   Test 10: TEST OK [0.000 secs, 2928 KB]<br>
   Test 11: TEST OK [0.000 secs, 2928 KB]<br>
   Test 12: TEST OK [0.011 secs, 2928 KB]</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">All tests OK.<br></span><span style="font-size:10pt"><b>YOUR PROGRAM ('fence9') WORKED FIRST TIME!</b></span><span style="font-size:10pt"> That's fantastic<br>
-- and a rare thing. Please accept these special automated<br>
congratulations.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>程序清单</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;cmath&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#define</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">MAX(a,b) ((a)&gt;(b)?(a):(b))</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#define</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">MIN(a,b) ((a)&lt;(b)?(a):(b))</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;fence9.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;fence9.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">const</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">double</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">JD = 0.000001;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">double</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">n,m,p,pick;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">inline</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">function(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">double</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">k,</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">double</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">b,</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">start,</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">end){</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//方程找点</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">total=0;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//important</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">double</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">y=0.0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=start;i&lt;=end;i++){</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">        y=k*i+b;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(fabs(y-(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">)y)-JD&lt;0) total++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">total;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fin&gt;&gt;n&gt;&gt;m&gt;&gt;p;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(n==0) pick+=m+1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">pick+=function(m/n,0.0,0,(</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">)n);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fout&lt;&lt;pick&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(n-p==0) pick+=m+1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">pick+=function(m/(n-p),(m*p)/fabs(n-p),(</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">)MIN(n,p),(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">)MAX(n,p));</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fout&lt;&lt;pick&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    pick+=p-2;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fout&lt;&lt;(</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">)(p*m/2-pick/2+1)&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>注意事项</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">注意精度</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">今天有一个</span> <span style="font-size:10pt"><b>发现</b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">:</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">我新弄了一个测试软件</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">用</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的这道题目测测</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">(</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">正好</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">给数据</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">),</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">结果在我这里有的点不对</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">!!!</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">以往都是一个点在我这里对在</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">不对</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">这说明</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">那里的评测机精度比我这里高多了</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.= =|||</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">/*-----------------------------------------------------</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">不久的分割线</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">--------------------------------------------------------------*/</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">刚才我又看了一遍我的程序</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">发现局部变量没有初始化</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">改过后我跟</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的答案一样了</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.= =,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">这说明</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">(</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">我又有了另一个发现</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">):USACO</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">的机子的内存很干净</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">!</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">看来只用于评测</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">大家也可以尝试一下不给局部变量初始化</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">在</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">USACO</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">和自己的机子上评测结果一样不一样</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">!(</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">此发现版权所有</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">转载不究</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">)</span></font></div><div align="justify"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>] </b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>Easy(</b></span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>关键要知道公式</b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>)</b></span></font></div></div>
</div></body></html> 