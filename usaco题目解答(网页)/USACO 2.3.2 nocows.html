<html>
<head>
  <title>USACO 2.3.2 nocows</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="496"/>
<h1>USACO 2.3.2 nocows</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>解题报告</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">典型的</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">DP</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">；组合问题</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">用</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>dp[i][j]</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">表示</span></font><font color="#010101" face="Arial"><span style="font-size:12pt"><b>i</b></span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">层</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span><span style="font-size:12pt"><b>j</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">个结点</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">(j</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">必为奇</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">).</span><span style="font-size:12pt"><b>dp[i][j]=Sigma{(p!=i-1)?2*dp[i-1][q]*dp[p][j-q-1]:dp[i-1][q]*dp[p][j-q-1]}(1&lt;=p&lt;i;2*i-3&lt;=q&lt;j),</b></span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">解释一下</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">:</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">首先要保证一棵子树的层数为</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i-1,</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">若当前的左右子树不一样高则把乘积再乘以</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">因为互换后是另一种情况</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">若一样则不必乘</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">2.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">这样当前的情况都从更小的左右两棵树推导而来</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">满足</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">DP</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的基本特性之一</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">使用</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">DP</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">求解</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>运行情况</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling...<br>
Compile: OK</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Executing...<br>
   Test 1: TEST OK [0.000 secs, 3008 KB]<br>
   Test 2: TEST OK [0.022 secs, 3008 KB]<br>
   Test 3: TEST OK [0.000 secs, 3008 KB]<br>
   Test 4: TEST OK [0.011 secs, 3008 KB]<br>
   Test 5: TEST OK [0.000 secs, 3008 KB]<br>
   Test 6: TEST OK [0.000 secs, 3008 KB]<br>
   Test 7: TEST OK [0.022 secs, 3008 KB]<br>
   Test 8: TEST OK [0.032 secs, 3008 KB]<br>
   Test 9: TEST OK [0.043 secs, 3008 KB]<br>
   Test 10: TEST OK [0.054 secs, 3008 KB]<br>
   Test 11: TEST OK [0.065 secs, 3008 KB]<br>
   Test 12: TEST OK [0.065 secs, 3008 KB]</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">All tests OK.<br>
Your program ('nocows') produced all correct answers! This is your<br>
submission #3 for this problem. </span><span style="font-size:10pt"><b>Congratulations!</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>程序清单</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;nocows.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;nocows.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">const</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">m=9901;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">n,k,temp,dp[101][201];</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fin&gt;&gt;n&gt;&gt;k;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                dp[1][1]=1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=2;i&lt;=k;i++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=3;j&lt;=n;j+=2)</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//结点只能为奇数</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((i&lt;8)&amp;&amp;(((1&lt;&lt;i)-1)&lt;j))</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">break</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//剪枝</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(j&lt;(2*i-1))</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">continue</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//剪枝</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">p=1;p&lt;i;p++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">q=2*i-3;q&lt;j;q+=2)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                temp=((p!=i-1)?2*dp[i-1][q]*dp[p][j-q-1]:dp[i-1][q]*dp[p][j-q-1]);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                                dp[i][j]=(temp+dp[i][j]&gt;dp[i][j]?(temp+dp[i][j])%m:dp[i][j]);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fout&lt;&lt;dp[k][n]&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>注意事项</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">无</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.usaco</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">官方的分析有优化</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">可以加速程序</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.</span></font></div><div align="justify"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b> Middle Down(noip the 2nd||3rd)</b></span></font></div></div>
</div></body></html> 