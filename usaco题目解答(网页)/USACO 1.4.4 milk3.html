<html>
<head>
  <title>USACO 1.4.4 milk3</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="422"/>
<h1>USACO 1.4.4 milk3</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">解题报告</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b></font></p><p align="left" style="text-align:left;mso-pagination:widow-orphan"><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">经典的搜索</span><span lang="EN-US" style="font-size:12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">虽然要找出所有状态</span><span lang="EN-US" style="font-size: 12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family: Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-font-kerning: 0pt">但是</span><span lang="EN-US" style="font-size:12.0pt;font-family:">DFS</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">也可以</span><span lang="EN-US" style="font-size:12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">甚至</span><span lang="EN-US" style="font-size:12.0pt; font-family:">DP,</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family: Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-font-kerning: 0pt">算法并不难</span><span lang="EN-US" style="font-size:12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">关键点是判断边界</span><span lang="EN-US" style="font-size:12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">不然会倒来倒去</span><span lang="EN-US" style="font-size: 12.0pt;font-family:">,</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family: Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-font-kerning: 0pt">陷入死循环</span><span lang="EN-US" style="font-size:12.0pt;font-family:">.</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">另外我的算法无关顺序</span><span lang="EN-US" style="font-size:12.0pt;font-family:">.</span><span style="font-size:12.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">每个模块</span><span lang="EN-US" style="font-size:12.0pt; font-family:">(</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family: Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-font-kerning: 0pt">一共</span><span lang="EN-US" style="font-size:12.0pt;font-family:">3</span><span style="font-size:12.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">个</span><span lang="EN-US" style="font-size:12.0pt;font-family:">)</span><span style="font-size:12.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">可以任意放置</span><span lang="EN-US" style="font-size: 12.0pt;font-family:">.</span></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">运行情况</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b></font></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><span lang="EN-US" style="font-size:10.0pt;font-family:">Compiling...<br>
Compile: OK</span></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><span lang="EN-US" style="font-size:10.0pt;font-family:">Executing...<br>
   Test 1: TEST OK [0.022 secs, 2940 KB]<br>
   Test 2: TEST OK [0.011 secs, 2940 KB]<br>
   Test 3: TEST OK [0.011 secs, 2940 KB]<br>
   Test 4: TEST OK [0.000 secs, 2940 KB]<br>
   Test 5: TEST OK [0.011 secs, 2940 KB]<br>
   Test 6: TEST OK [0.011 secs, 2940 KB]<br>
   Test 7: TEST OK [0.011 secs, 2940 KB]<br>
   Test 8: TEST OK [0.000 secs, 2940 KB]<br>
   Test 9: TEST OK [0.000 secs, 2940 KB]<br>
   Test 10: TEST OK [0.011 secs, 2940 KB]</span></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><span lang="EN-US" style="font-size:10.0pt;font-family:">All tests OK.<br></span><b><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt; font-family:">YOUR PROGRAM ('milk3') WORKED FIRST TIME!</span></b><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:"> </span><span lang="EN-US" style="font-size:10.0pt;font-family:">That's fantastic<br>
-- and a rare thing. Please accept these special automated<br></span><b><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt; font-family:">congratulations.</span></b></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">程序清单</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b></font></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"></p><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;milk3.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;milk3.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">all[1000],total=0,a=0,b=0,c=0,temp=0;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">bool</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">jilu[21][21][21]={</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">false</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">};</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//用以记录状态,避免陷入死锁</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">dfs(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">a1,</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">b1,</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">c1)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">ax=a1,bx=b1,cx=c1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(jilu[a1][b1][c1])</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//不再搜索重复的状态</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                jilu[a1][b1][c1]=</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">true</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//记录本次状态</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(a1==0)</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//判断是否成立</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                total++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                all[total]=cx;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(a1!=0)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(b1!=b)</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//未满</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((b-b1)&gt;=a1) {b1+=a1;a1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{a1-=(b-b1);b1=b;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                a1=ax;b1=bx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(c1!=c)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((c-c1)&gt;=a1) {c1+=a1;a1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{a1-=(c-c1);c1=c;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                a1=ax;c1=cx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(b1!=0)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(a1!=a)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((a-a1)&gt;=b1) {a1+=b1;b1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{b1-=(a-a1);a1=a;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                a1=ax;b1=bx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(c1!=c)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((c-c1)&gt;=b1) {c1+=b1;b1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{b1-=(c-c1);c1=c;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                c1=cx;b1=bx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(c1!=0)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(a1!=a)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((a-a1)&gt;=c1) {a1+=c1;c1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{c1-=(a-a1);a1=a;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                a1=ax;c1=cx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(b1!=b)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((b-b1)&gt;=c1) {b1+=c1;c1=0;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">{c1-=(b-b1);b1=b;dfs(a1,b1,c1);}</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                b1=bx;c1=cx;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//回溯</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                dfs(0,0,c);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=total-1;i++)</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//排序并输出</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=1;j&lt;=total-i;j++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(all[j]&gt;all[j+1])</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                temp=all[j];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                all[j]=all[j+1];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                                all[j+1]=temp;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=total-1;i++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                fout&lt;&lt;all[i]&lt;&lt;</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">' '</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fout&lt;&lt;all[total]&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">注意事项</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b></font></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><span style="font-size:10.0pt; font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial; mso-bidi-font-family:Arial;mso-font-kerning:0pt">无论是用</span><span lang="EN-US" style="font-size:10.0pt;font-family:">DFS</span><span style="font-size:10.0pt;font-family: 宋体;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family: Arial;mso-font-kerning:0pt">还是</span><span lang="EN-US" style="font-size:10.0pt; font-family:">BFS</span><span style="font-size:10.0pt;font-family:宋体;mso-ascii-font-family: Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-font-kerning: 0pt">都要判断边界条件</span><span lang="EN-US" style="font-size:10.0pt;font-family:">,</span><span style="font-size:10.0pt;font-family:宋体;mso-ascii-font-family:Arial;mso-hansi-font-family: Arial;mso-bidi-font-family:Arial;mso-font-kerning:0pt">对于这道题可以用一个布尔数组记录判断过的状态</span><span lang="EN-US" style="font-size:10.0pt;font-family:">.</span></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">难易等级</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b><b><span lang="EN-US" style="font-size:13.5pt; mso-bidi-font-size:11.0pt;font-family:"> </span></b></font><b><span lang="EN-US" style="font-size: 10.0pt;mso-bidi-font-size:11.0pt;font-family:">Easy Up (noip the 2nd)</span></b></p><p align="left" style="mso-margin-top-alt:auto;mso-margin-bottom-alt: auto;text-align:left;mso-pagination:widow-orphan"><font face="黑体"><b><span lang="EN-US" style="font-size:13.5pt;font-family:">[</span></b><b><span style="font-size: 13.5pt;">优秀程序</span></b><b><span lang="EN-US" style="font-size:13.5pt;font-family:">]</span></b></font></p><p align="left" style="text-align:left;mso-pagination:widow-orphan; tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt"><span lang="EN-US" style="font-size:10.0pt;font-family:宋体;mso-bidi-font-family:宋体; mso-font-kerning:0pt">//</span><span style="font-size:10.0pt;font-family:宋体; mso-bidi-font-family:宋体;mso-font-kerning:0pt">把状态压缩成<span lang="EN-US">2D</span></span></p><p align="left" style="text-align:left;mso-pagination:widow-orphan; tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt"></p><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">/*</span></font></div><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">ID: silentf1</span></font></div><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">PROG: milk3</span></font></div><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">LANG: C++</span></font></div><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">*/</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;stdio.h&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">A, B, C;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">CB[21][21];</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// All states</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">void</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">readFile() {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    FILE *f;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    f = fopen(</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;milk3.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;r&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fscanf(f,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;%d%d%d&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">, &amp;A, &amp;B, &amp;C);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fclose(f);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">void</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">writeFile() {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    FILE *f;</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    f = fopen(</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;milk3.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;w&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(i = 0; i &lt;= C; i++) {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(CB[i][C - i] == 1) {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">           </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">((i != C-B) &amp;&amp; (i != 0)) fprintf(f,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot; &quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">            fprintf(f,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;%d&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">, i);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fprintf(f,</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;\n&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fclose(f);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// do brute-force search, c/b: current state</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">void</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">c,</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">b) {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">a;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(CB[c][b] == 1)</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// already searched</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    CB[c][b] = 1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    a = C-b-c;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// calc amount in A</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// do all moves:</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// c-&gt;b</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(B &lt; c+b) search(c - (B - b), B);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(0, c + b);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// b-&gt;c</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(C &lt; c+b) search(C, b - (C - c));</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(c + b, 0);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// c-&gt;a</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(A &lt; c+a) search(c - (A - a), b);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(0, b);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// a-&gt;c</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(C &lt; c+a) search(C, b);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(c + a, b);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// b-&gt;a</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(A &lt; b+a) search(c, b - (A - a));</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(c, 0);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">// a-&gt;b</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(B &lt; b+a) search(c, B);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">search(c, b + a);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt"> </span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main () {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    readFile();</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    search(C, 0);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    writeFile();</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div>
</div></body></html> 