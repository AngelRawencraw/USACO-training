<html>
<head>
  <title>USACO 3.3.5 game1</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="663"/>
<h1>USACO 3.3.5 game1</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>解题报告</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">首次遇到博弈问题</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">分析问题给定一个序列</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">{num1,num2,num3......numN}</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">两个人分别从左右以最佳策略取值，找到第一个人的可能最大值。那么我们把问题划分得小一点得知，当前的最佳策略相当于分别选择左右两边的数字加上剩下的决策序列中的最大的。因此具备最优子结构，可以拆分为小问题解决。又因为只有两个人所以知道了一个人的状态就一定知道另一个人的。用</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">DP[i][j]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">表示区间</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">[i,j]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">第一个人的最佳策略。边界条件</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">DP[i][i]=num[i];</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">状态转移方程</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">:DP[i][j]=MAX{num[i]+sum[i+1][j]-DP[i+1][j],num[j]+sum[i][j-1]-DP[i][j-1]};</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">根据分析不难理解本方程。不过需要从小的区间往大的区间计算。</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">关于原理</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">:</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">因为当第一个人选择最左边时从</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">左</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">+1)</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">向后它就作为后手了</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">而第二个人作为先手</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">因此从</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">左</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">+1)</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">向后第二个人是先手</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">他此时的决策相当于第一个人</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">根据方程的意义</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">第一个人在余下序列的最值就是从</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">左</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">+1)</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">向后的总合</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">减去第二个人作为先手的最优决策</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.(^o^)</span></font></div><p><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>运行情况</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></p><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling... <br>
Compile: OK</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Executing...<br>
   Test 1: TEST OK [0.000 secs, 2968 KB]<br>
   Test 2: TEST OK [0.011 secs, 2968 KB]<br>
   Test 3: TEST OK [0.000 secs, 2968 KB]<br>
   Test 4: TEST OK [0.032 secs, 2968 KB]<br>
   Test 5: TEST OK [0.000 secs, 2968 KB]<br>
   Test 6: TEST OK [0.000 secs, 2968 KB]<br>
   Test 7: TEST OK [0.011 secs, 2968 KB]<br>
   Test 8: TEST OK [0.011 secs, 2968 KB]<br>
   Test 9: TEST OK [0.022 secs, 2968 KB]<br>
   Test 10: TEST OK [0.000 secs, 2968 KB]<br>
   Test 11: TEST OK [0.000 secs, 2968 KB]<br>
   Test 12: TEST OK [0.011 secs, 2968 KB]<br>
   Test 13: TEST OK [0.000 secs, 2968 KB]<br>
   Test 14: TEST OK [0.022 secs, 2968 KB]<br>
   Test 15: TEST OK [0.011 secs, 2968 KB]<br>
   Test 16: TEST OK [0.000 secs, 2968 KB]<br><br>
All tests OK.<br></span><span style="font-size:10pt"><b>YOUR PROGRAM ('game1') WORKED FIRST TIME!</b></span><span style="font-size:10pt"> That's fantastic<br>
-- and a rare thing. Please accept these special automated<br>
congratulations.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>程序清单</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#define</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">MAX(a,b) ((a)&gt;(b)?(a):(b))</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;game1.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;game1.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">sum[101],n,dp[101][101];</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fin&gt;&gt;n;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=n;i++){</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">        fin&gt;&gt;dp[i][i];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">        sum[i]=sum[i-1]+dp[i][i];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">k=0;k&lt;n;k++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;=n-k;i++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">           </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=i;j&lt;=i+k;j++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                dp[i][j]=MAX(sum[j]-sum[i-1]-dp[i+1][j],sum[j]-sum[i-1]-dp[i][j-1]);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fout&lt;&lt;dp[1][n]&lt;&lt;</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">' '</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">&lt;&lt;sum[n]-dp[1][n]&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>注意事项</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><p><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">一定要先算出小区间</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.</span></font></p><div align="justify"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>] </b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>Middle (</b></span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt"><b>说不准是什么级别的</b></span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>)</b></span></font></div></div>
</div></body></html> 