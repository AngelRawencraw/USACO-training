<html>
<head>
  <title>USACO 1.5.4 checker</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="436"/>
<h1>USACO 1.5.4 checker</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size:13pt"><b>解题报告</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:12pt">DFS+Bool</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">这是我最开始的想法，但是实践后发现超时，然后从提示中了解到对称性的办法，但是没有意识到奇偶性</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">没有成功</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">)</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">。于是就改成了</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">Bit</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">运算的方法，具体的过程不说了，主要令我伤脑筋的是如何模拟位置，判断攻击情况等（我比较菜</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">开始只想使用一个数字解决</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">）。以下就是</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">Bit</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">运算的实现方法</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">具体思想</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">:</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">在浏览器地址栏键入</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">baike.baidu.com,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">输入</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">&quot;</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">位运算</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">&quot;,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">点击</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">进入即可</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">)</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size:13pt"><b>运行情况</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling...<br>
Compile: OK</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Executing...<br>
   Test 1: TEST OK [0.000 secs, 2928 KB]<br>
   Test 2: TEST OK [0.000 secs, 2928 KB]<br>
   Test 3: TEST OK [0.011 secs, 2928 KB]<br>
   Test 4: TEST OK [0.000 secs, 2928 KB]<br>
   Test 5: TEST OK [0.011 secs, 2928 KB]<br>
   Test 6: TEST OK [0.011 secs, 2928 KB]<br>
   Test 7: TEST OK [0.032 secs, 2928 KB]<br>
   Test 8: TEST OK [0.151 secs, 2928 KB]</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">All tests OK.<br></span><span style="font-size:10pt"><b>YOUR PROGRAM ('checker') WORKED FIRST TIME!</b></span><span style="font-size:10pt"> That's fantastic<br>
-- and a rare thing. Please accept these special automated<br></span><span style="font-size:10pt"><b>congratulations.</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size:13pt"><b>程序清单</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;checker.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;checker.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">n,tot[14],total=0,last=0;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">dfs(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">lev)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(total&gt;=3)</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(lev&gt;n)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                total++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=1;j&lt;n;j++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                fout&lt;&lt;tot[j]&lt;&lt;</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">' '</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                fout&lt;&lt;tot[n]&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">j=1;j&lt;=n;j++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                tot[lev]=j;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">bool</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">f=</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">false</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">i=1;i&lt;lev;i++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">((abs(lev-i)==abs(tot[i]-tot[lev]))||(tot[lev]==tot[i]))</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                f=</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">true</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">break</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(!f) dfs(lev+1);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">dfsbit(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">bit,</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">left,</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">right)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">temp=0,tt=0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(bit==last) total++;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                temp=last&amp;(~(bit|left|right));</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//检查空位</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">while</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(temp!=0)</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//有可行解</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                tt=temp&amp;(temp^(temp-1));</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//取出最右边的1.</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                temp-=tt;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//去掉最右边的1</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(tt!=0) dfsbit(bit+tt,(left+tt)&lt;&lt;1,(right+tt)&gt;&gt;1);</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//移位迭代</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fin&gt;&gt;n;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                dfs(1);</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//正常的搜索,用来显示结果</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">(total!=0)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                {</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                total=0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                last=(1&lt;&lt;n)-1;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//最终的状态</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                                dfsbit(0,0,0);</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//搜索所有的可行方案</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">                fout&lt;&lt;total&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size:13pt"><b>注意事项</b></span></font><font color="#010101"><span style="font-size: 13pt;"><b>]</b></span></font></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">如果是普通的</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">dfs+</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">对称</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">,</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">奇偶是有区别的</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.(bit</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">运算是我参考了先人的经验后明白的</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">)</span></font></div><div align="justify"><font face="黑体"><font color="#010101"><span style="font-size: 13pt;"><b>[</b></span></font><font color="#010101"><span style="font-size:13pt"><b>难易等级</b></span></font></font><font color="#010101"><span style="font-size: 13pt;"><b><font face="黑体">]</font><font face="Arial"> </font></b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>Middle Down(noip the 2nd||3rd)</b></span></font></div></div>
</div></body></html> 