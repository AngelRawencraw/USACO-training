<html>
<head>
  <title>USACO 3.2.2 kimbits</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/268868 (zh-CN); Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="634"/>
<h1>USACO 3.2.2 kimbits</h1>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>解题报告</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">本题目直接枚举很不现实</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">所以可以先把大致位置</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">&quot;</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">计算</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">&quot;</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">出来</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">然后构造</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">首先用</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">DP[i][j]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">计算出长度为</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">i,'1'</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">的位数不超过</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">j</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的数字共有多少个</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">方程类似背包</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">O(n^2).</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">然后进行构造</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">O(n),</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">构造方式是</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">:</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">首先判断</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i</b></span><span style="font-size:12pt">(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">数字的位置</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">),</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">与</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">DP[N-1][L]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">谁更大</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">如果</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">大那么说明当前位置是</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">1,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">否则为</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">0.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">因为根据方程</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">:DP[N-1][L]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">满足的数字的第</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">N</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">位必定是</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">0(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">不必解释</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">).DP[N-1][L-1]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">则表示长度为</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">N</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">且第</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">N</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">位为</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的有多少个</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">如果</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的相对位置在大于</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">DP[N-1][L]</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的范围内</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">那么就是</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1.</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">反之亦然</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体"><span style="font-size:12pt">依此类推</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span> <span style="font-size:12pt"><b>i'</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">与</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">DP[N-2][L']</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">比较</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">直到比较完成所有</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">.(</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">如果</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i'</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">大</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font> <font color="#010101" face="宋体"><span style="font-size:12pt">则</span></font><font color="#010101" face="Arial"><span style="font-size:12pt">L=L-1;</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">因为这时已经输出一个</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">1</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">了</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt">,</span></font><font color="#010101" face="宋体"><span style="font-size:12pt">同时要改变</span></font> <font color="#010101" face="Arial"><span style="font-size:12pt"><b>i</b></span></font><font color="#010101" face="宋体"><span style="font-size:12pt">的相对位置</span></font><font color="#010101"><font face="Arial" style="font-size: 12pt;">)。举个例子：10011，他的排名位置肯定</font><font face="宋体" style="font-size: 16px;"><b>大于</b></font><font face="Arial" style="font-size: 12pt;">DP[4][3]并且</font><b style="font-size: 12pt; font-family: Arial;">小于等于</b><font face="Arial" style="font-size: 12pt;">DP[5][3]。输出1并且减去DP[4][3]后剩下的值则是0011的排名情况，注意到00011和10011中</font><b style="font-size: 12pt; font-family: Arial;">0011对于00000</b><font face="Arial" style="font-size: 12pt;">和</font><b style="font-size: 12pt; font-family: Arial;">0011对于10011</b><font face="Arial" style="font-size: 12pt;">的</font><b style="font-size: 12pt; font-family: Arial;">相对排名</b><font face="Arial" style="font-size: 12pt;">情况都是一样的。用这个思路迭代输出，便可以得到我们所要的数字。</font></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>运行情况</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">Compiling... <br>
Compile: OK<br><br>
Executing...<br>
   Test 1: TEST OK [0.000 secs, 2936 KB]<br>
   Test 2: TEST OK [0.011 secs, 2936 KB]<br>
   Test 3: TEST OK [0.022 secs, 2936 KB]<br>
   Test 4: TEST OK [0.000 secs, 2936 KB]<br>
   Test 5: TEST OK [0.011 secs, 2936 KB]<br>
   Test 6: TEST OK [0.022 secs, 2936 KB]<br>
   Test 7: TEST OK [0.000 secs, 2936 KB]<br>
   Test 8: TEST OK [0.000 secs, 2936 KB]<br>
   Test 9: TEST OK [0.011 secs, 2936 KB]<br>
   Test 10: TEST OK [0.011 secs, 2936 KB]<br>
   Test 11: TEST OK [0.000 secs, 2936 KB]<br>
   Test 12: TEST OK [0.000 secs, 2936 KB]<br>
   Test 13: TEST OK [0.000 secs, 2936 KB]<br><br>
All tests OK.<br></span></font><font color="#010101" face="Arial" size="1"><span style="font-size:8pt"><b>YOUR PROGRAM ('kimbits') WORKED FIRST TIME!</b></span> <span style="font-size:8pt"> That's fantastic<br>
-- and a rare thing. Please accept these special automated<br>
congratulations.</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>程序清单</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">#include</span></font> <font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&lt;fstream&gt;</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">using</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">namespace</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">std;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ofstream fout (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;kimbits.out&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::out);</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">ifstream fin (</span></font><font color="#A31515" face="Times New Roman" size="1"><span style="font-size:9pt">&quot;kimbits.in&quot;</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">,ios::in);</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">long</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">n,l,i,dp[32][32]={0};</span></font></div><div align="left"><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">main()</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">{</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fin&gt;&gt;n&gt;&gt;l&gt;&gt;i;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">p=0;p&lt;=n;p++) dp[0][p]=dp[p][0]=1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">p=1;p&lt;=n;p++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">q=1;q&lt;=l;q++)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(p&gt;=q) dp[p][q]=dp[p-1][q-1]+dp[p-1][q];</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">dp[p][q]=dp[p][q-1];</span></font><font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//继承上一个</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">for</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(</span></font><font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">int</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">p=n-1;p&gt;=0;p--)</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">if</span></font><font face="Times New Roman" size="1"><span style="font-size:9pt">(dp[p][l]&lt;i){</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">            fout&lt;&lt;1;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">            i-=dp[p][l];</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//refresh,减去第n位是1的字符串的个数</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">            l--;</span></font> <font color="#008000" face="Times New Roman" size="1"><span style="font-size:9pt">//已经输出了一个1</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">        }</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">       </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">else</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">fout&lt;&lt;0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">    fout&lt;&lt;endl;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">   </span></font> <font color="#0000FF" face="Times New Roman" size="1"><span style="font-size:9pt">return</span></font> <font face="Times New Roman" size="1"><span style="font-size:9pt">0;</span></font></div><div align="left"><font face="Times New Roman" size="1"><span style="font-size:9pt">}</span></font></div></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>注意事项</b></span></font> <font color="#010101" face="Arial"><span style="font-size:13pt"><b>]</b></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:4.75mm; margin-bottom:4.75mm;"><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">无</span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt">.(</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">个人认为这道题目蛮锻炼优化思想的</span></font> <font color="#010101" face="Arial" size="2"><span style="font-size:10pt">)</span></font></div><div align="justify"><font color="#010101" face="Arial"><span style="font-size:13pt"><b>[</b></span></font><font color="#010101" face="宋体"><span style="font-size:13pt"><b>难易等级</b></span></font><font color="#010101" face="Arial"><span style="font-size:13pt"><b>] </b></span></font><font color="#010101" face="Arial" size="2"><span style="font-size:10pt"><b>Middle(noip the 3rd)</b></span></font></div></div>
</div></body></html> 